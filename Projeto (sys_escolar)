/*--- Criando Banco de Dados Sistema de Gestão Escolar ---*/
CREATE DATABASE sys_escolar;

USE sys_escolar;

/*Criando tabela para os Cursos*/

CREATE TABLE CURSO(
id_curso INT PRIMARY KEY,
nome_curso VARCHAR(50),
valor_curso FLOAT		/*Adicionado na linha 55-57*/
);


/*Criando tabela para os Alunos*/

CREATE TABLE ALUNO(
id_aluno INT AUTO_INCREMENT PRIMARY KEY,
nome VARCHAR(100),
data_nascimento DATE,
id_curso INT,		/*Adicionado na linha 27-29*/
FOREIGN KEY (id_curso)
	references CURSO(id_curso)
);


/*Altere a tabela Aluno adicionando uma coluna id_curso como INTEIRO*/
ALTER TABLE ALUNO
ADD COLUMN id_curso INT;


/*Insira informações na tabela Aluno
(Informações a serem preenchidas)
Valores
(Informações preenchidas)*/

INSERT INTO ALUNO
(nome, data_nascimento, id_curso)
VALUES
('Carlos Souza', '2000-10-12', 1),		/*Deletado na linha 65-67*/
('Mario Alves', '1997-07-02', 2),
('Bianca Flores', '1998-06-05', 1),
('Val Gonçalvez', '2002-05-28', 2);


/*Insira informações na tabela Curso*/

INSERT INTO CURSO
(id_curso, nome_curso, valor_curso)
VALUES
(1,'TECNICO EM INFORMATICA', 1200),
(2, 'DESENVOLVIMENTO WEB', 1500);		/*Valor do curso alterado na linha 60-62*/


/*Altera a tabela Curso adicionando uma coluna valor_curso como FLOAT*/
ALTER TABLE CURSO
ADD COLUMN valor_curso FLOAT;


/*Atualiza o Curso definindo valor_curso 2000 onde id do curso for 2*/
UPDATE CURSO SET valor_curso = 2000
WHERE id_curso = 2;


/*Remova um Aluno onde id do aluno for 01*/
DELETE FROM ALUNO
WHERE id_aluno = 01;

/*Seleciona nome do aluno e nome do curso através das tabelas ALUNO e CURSO*/
SELECT
ALUNO.nome,
CURSO.nome_curso
FROM ALUNO
INNER JOIN CURSO
ON ALUNO.id_curso = CURSO.id_curso;

CREATE TABLE PROFESSOR(
	id_prof INT AUTO_INCREMENT PRIMARY KEY,
    nome VARCHAR(100),
    email VARCHAR(100),
    curso_lecio VARCHAR(50) CHECK (curso_lecio IN ('TECNICO EM INFORMATICA', 'DESENVOLVIMENTO WEB'))
);

CREATE TABLE ATIVIDADE(
	id_atv INT AUTO_INCREMENT PRIMARY KEY,
    titulo VARCHAR(50),
    data_entrega DATE,
    nota INT,
    id_prof INT,
    FOREIGN KEY (id_prof)
		references PROFESSOR(id_prof)
);

INSERT INTO PROFESSOR
(nome, email, curso_lecio)
VALUES
('Mario Alberto', 'mario@gmail.com', 'TECNICO EM INFORMATICA'),
('Roberta Mirian', 'roberta@gmail.com', 'DESENVOLVIMENTO WEB'),
('Laura Kelly', 'laura@gmail.com', 'DESENVOLVIMENTO WEB'),
('José Chico', 'jose@gmail.com', 'TECNICO EM INFORMATICA'),
('Helton Rodrigo', 'helton@gmail.com', 'DESENVOLVIMENTO WEB');

INSERT INTO ATIVIDADE
(titulo, data_entrega, nota, id_prof)
VALUES
('Banco de Dados', '2025-12-28', 8, 1),
('HTML Básico', '2026-01-02', 7, 2),
('Criando Site do Zero', '2026-03-15', 6, 3),
('P.O.O', '2026-01-20', 9, 4),
('Segurança de Dados', '2026-06-21', 8, 5);

/*Seleciona Nome e Cursos Lecionados pelos Professores*/
SELECT nome, curso_lecio
FROM PROFESSOR;

/*Selecione Nome dos Alunos e Nome das Atividades*/
SELECT ALUNO.nome, ATIVIDADE.titulo
FROM ALUNO
INNER JOIN ATIVIDADE
ON ALUNO.id_aluno = ATIVIDADE.id_atv;

/*Selecione Nome dos Alunos, Nome e Cursos Lecionados dos Professores*/
SELECT ALUNO.nome AS Alunos, PROFESSOR.nome AS Professores, PROFESSOR.curso_lecio AS Cursos
FROM ALUNO
INNER JOIN PROFESSOR
ON ALUNO.id_aluno = PROFESSOR.id_prof;

/*Selecione Nome e Valor dos Cursos, e Nome dos Professores*/
SELECT CURSO.nome_curso AS Cursos, CURSO.valor_curso AS Valores, PROFESSOR.nome AS Professores
FROM CURSO
INNER JOIN PROFESSOR
ON CURSO.id_curso = PROFESSOR.id_prof;

/*Selecione Nome dos Alunos, Nome dos Professores, Nome e Nota das Atividades*/
SELECT ALUNO.nome, PROFESSOR.nome, ATIVIDADE.titulo, ATIVIDADE.nota
FROM ALUNO
INNER JOIN PROFESSOR
ON ALUNO.id_aluno = PROFESSOR.id_prof
INNER JOIN ATIVIDADE
ON ALUNO.id_aluno = ATIVIDADE.id_atv;
