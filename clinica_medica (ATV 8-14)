	/*--- Criando o Banco de Dados ---*/
	CREATE DATABASE clinica_medica;

	USE clinica_medica;

	/*--- Criando as Tabelas ---*/


	/*Criando tabela para os Médicos*/

	CREATE TABLE MEDICO(
		crm INT PRIMARY KEY,
		nome VARCHAR(100) NOT NULL,
		email VARCHAR(100) NOT NULL,
		telefone VARCHAR(25) UNIQUE,
		especialidade VARCHAR(50) CHECK (especialidade in ('Cardiologista', 'Nutricionista', 'Odontologista'))
		);


	/*Criando tabela para os Pacientes*/

	CREATE TABLE PACIENTE(
		identidade INT PRIMARY KEY,
		nome VARCHAR(100) NOT NULL,
		endereco VARCHAR(100) NOT NULL,
		telefone VARCHAR(25) UNIQUE
	);


	/*Criando tabela para as Consultas*/

	CREATE TABLE CONSULTA(
		num_consulta VARCHAR(50) PRIMARY KEY,
		nome_paciente VARCHAR(100) NOT NULL,
		ident_paciente INT NOT NULL,
		nome_medico VARCHAR(100) NOT NULL,
		tipo_exame VARCHAR(50) CHECK (tipo_exame in ('Cardiologia', 'Nutricionista', 'Odontologia', 'Neurologia', 'Fisioterapia')),
		foreign key(ident_paciente)
			references PACIENTE(identidade)
		);


	/*Criando tabela para os Exames*/

	CREATE TABLE EXAME(
		codigo_exame VARCHAR(50) PRIMARY KEY,
		nome_exame VARCHAR(50) NOT NULL,
		nome_paciente VARCHAR(100) NOT NULL,
		crm_medico INT NOT NULL,
		data_exame VARCHAR(20) NOT NULL,
		foreign key(crm_medico)
			references MEDICO(crm)
	);


	/*Criando registros/informações paras as tabelas*/


	/*Criando registro para os Médicos*/

	INSERT INTO MEDICO
	(crm, nome, email, telefone, especialidade)
	VALUES
	(111111, 'João', 'joao@gmail.com', '(83)0000-0000', 'Cardiologista'),
	(222222, 'Matheus', 'matheus@gmail.com', '(83)1111-1111', 'Odontologista'),
	(333333, 'Marcos', 'marcos@gmail.com', '(83)2222-2222', 'Nutricionista');


	/*Criando registro para os Pacientes*/

	INSERT INTO PACIENTE
	(identidade, nome, endereco, telefone)
	VALUES
	(777777, 'Ruth', 'Rua Rodrigues Alves', '(83)5555-5555'),		/*Telefone alterado na linha 105-107*/
	(888888, 'Amós', 'Rua Alfredo Ribeiro', '(83)6666-6666'),
	(999999, 'Ester', 'Rua Dantas Mario', '(83)7777-7777'),
	(101010, 'Habacuque', 'Rua Kleber João', '(83)8888-8888'),		/*Paciente removido na linha 101-103*/
	(121212, 'Moises', 'Rua Brasilia Velha', '(83)9999-9999');


	/*Criando registro para as Consultas*/

	INSERT INTO CONSULTA
	(num_consulta, nome_paciente, ident_paciente, nome_medico, tipo_exame)
	VALUES
	('C-0000', 'Ruth', 777777, 'João', 'Cardiologia'),
	('C-1111', 'Amós', 888888, 'Matheus', 'Odontologia'),
	('C-2222', 'Ester', 999999, 'Marcos', 'Nutricionista'),
	('C-3333', 'Habacuque', 101010, 'João','Cardiologia');		/*Paciente removido da consulta na linha 97-99*/
    
    INSERT INTO EXAME
    (codigo_exame, nome_exame, nome_paciente, crm_medico, data_exame)
    VALUES
    ('E01', 'Cardiologia', 'Ruth', 111111, '28/12/2025');


	/*Remover da Consulta onde a identidade do paciente é 101010*/
	DELETE FROM CONSULTA
	WHERE ident_paciente = 101010;

	/*Remover dos Pacientes onde a identidade é 101010*/
	DELETE FROM PACIENTE
	WHERE identidade = 101010;

	/*Atualizar Pacientes definindo telefone : "novo_telefone" onde a identidade for 777777*/
	UPDATE PACIENTE SET telefone = '(83)1515-1515'
	WHERE identidade = 777777;

	/*Selecione todas as colunas dos Pacientes*/
	SELECT *
	FROM PACIENTE;

	/*Selecione nome e especialidade dos Médicos*/
	SELECT nome, especialidade
	FROM MEDICO;

	/*Selecione numero das consultas das Consultas*/
	SELECT num_consulta
	FROM CONSULTA;

	/*Selecione tipo de exame das Consultas onde o tipo de exame for Cardiologia*/
	SELECT nome_paciente, tipo_exame
	FROM CONSULTA
	WHERE tipo_exame = 'Cardiologia';

	/*Selecione nome e especialidade dos Médicos onde a especialidade for Cardiologia*/
	SELECT nome, especialidade
	FROM MEDICO
	WHERE especialidade = 'Cardiologista';

	/*Selecione contando quantos nome tem em Pacientes*/
	SELECT COUNT(*) AS nome
	FROM PACIENTE;

	/*Selecione a menor data dos exames na tabela de Exames;*/
	SELECT MIN(data_exame) AS data_exame
	FROM EXAME;

	/*Selecione nome dos Pacientes e ordena em ordem Crescente/Ascendente*/
	SELECT nome
	FROM PACIENTE
	ORDER BY nome ASC;

	/*Seleciona nome dos médicos e conta todo o total de consultas da tabela CONSULTA
    agrupando pelo nome dos médicos*/
	SELECT nome_medico, COUNT(*) AS total_consulta
	FROM CONSULTA
	GROUP BY nome_medico;
    
    /*Consulta nome e data dos exames*/
    SELECT nome, data_exame
    FROM PACIENTE
    INNER JOIN EXAME
    ON PACIENTE.nome = EXAME.nome_paciente;
    
    
    /*Seleciona nome e especialidade dos médicos, nome dos pacientes e tipo do exame das tabelas
    CONSULTA, PACIENTE E MEDICO*/
    SELECT
    MEDICO.nome AS nome_medico,
    MEDICO.especialidade,
    PACIENTE.nome AS nome_paciente,
    CONSULTA.tipo_exame
    FROM CONSULTA
	INNER JOIN PACIENTE
    ON CONSULTA.ident_paciente = PACIENTE.identidade
	INNER JOIN MEDICO
    ON CONSULTA.nome_medico = MEDICO.nome;
    
    
    /*Seleciona nome, total de numero das consultas e a data da tabela CONSULTA
    incluindo a tabela EXAME mostrando também quem não fez consulta (NULL)*/
    SELECT
	CONSULTA.nome_medico,
    COUNT(CONSULTA.num_consulta) AS total_consulta,
    MIN(EXAME.data_exame) AS data_exame
    FROM CONSULTA
    LEFT JOIN EXAME
    ON CONSULTA.nome_paciente = EXAME.nome_paciente
    GROUP BY CONSULTA.nome_medico;
    
